<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="Node.js初识Node.js浏览器中的JS JS核心语法：变量，数据类型，分支，循环，判断，函数，作用域··· WebAPI：DOM操作，BOM操作，基于XMLHttpRequest的Ajax操作···  为什么浏览器可以运行js？ —-&gt;浏览器通过使用JavaScript解析引擎来对js代码进行解析 不同的浏览器使用不同的JavaScript解析引擎：  Chrome &#x3D;》">
<meta property="og:type" content="article">
<meta property="og:title" content="Node.js">
<meta property="og:url" content="http://p5ych2022.github.io/2023/09/03/node-js/index.html">
<meta property="og:site_name" content="psych&#39;s blog">
<meta property="og:description" content="Node.js初识Node.js浏览器中的JS JS核心语法：变量，数据类型，分支，循环，判断，函数，作用域··· WebAPI：DOM操作，BOM操作，基于XMLHttpRequest的Ajax操作···  为什么浏览器可以运行js？ —-&gt;浏览器通过使用JavaScript解析引擎来对js代码进行解析 不同的浏览器使用不同的JavaScript解析引擎：  Chrome &#x3D;》">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2023-09-03T11:39:47.000Z">
<meta property="article:modified_time" content="2024-03-02T12:59:55.813Z">
<meta property="article:author" content="psych">
<meta property="article:tag" content="web">
<meta property="article:tag" content="web基础">
<meta name="twitter:card" content="summary">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>Node.js</title>
    <!-- async scripts -->
    <!-- Google Analytics -->


    <!-- Umami Analytics -->


    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
<meta name="generator" content="Hexo 6.3.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="Top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa-solid fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/about/">About</a></li><!--
     --><!--
       --><li><a href="/archives/">Article</a></li><!--
     --><!--
       --><li><a href="/tags/">Tag</a></li><!--
     --><!--
       --><li><a href="/categories/">Category</a></li><!--
     --><!--
       --><li><a href="/search/">Search</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="Previous post" href="/2023/11/21/AC%E8%87%AA%E5%8A%A8%E6%9C%BA/"><i class="fa-solid fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="Next post" href="/2023/08/29/nssctf-2023-%E9%83%A8%E5%88%86writeup/"><i class="fa-solid fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="Back to top" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="Share post" href="#"><i class="fa-solid fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://p5ych2022.github.io/2023/09/03/node-js/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://p5ych2022.github.io/2023/09/03/node-js/&text=Node.js"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://p5ych2022.github.io/2023/09/03/node-js/&title=Node.js"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://p5ych2022.github.io/2023/09/03/node-js/&is_video=false&description=Node.js"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Node.js&body=Check out this article: http://p5ych2022.github.io/2023/09/03/node-js/"><i class="fa-solid fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://p5ych2022.github.io/2023/09/03/node-js/&title=Node.js"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://p5ych2022.github.io/2023/09/03/node-js/&title=Node.js"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://p5ych2022.github.io/2023/09/03/node-js/&title=Node.js"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://p5ych2022.github.io/2023/09/03/node-js/&title=Node.js"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://p5ych2022.github.io/2023/09/03/node-js/&name=Node.js&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://p5ych2022.github.io/2023/09/03/node-js/&t=Node.js"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    
    
      <div id="toc">
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Node-js"><span class="toc-number">1.</span> <span class="toc-text">Node.js</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9D%E8%AF%86Node-js"><span class="toc-number">1.0.0.0.1.</span> <span class="toc-text">初识Node.js</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%AD%E7%9A%84JS"><span class="toc-number">1.0.0.0.1.1.</span> <span class="toc-text">浏览器中的JS</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#JS%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83"><span class="toc-number">1.0.0.0.1.2.</span> <span class="toc-text">JS运行环境</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#Node-js-1"><span class="toc-number">1.0.0.0.1.3.</span> <span class="toc-text">Node.js</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#fs%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E6%A8%A1%E5%9D%97"><span class="toc-number">1.0.0.0.2.</span> <span class="toc-text">fs文件系统模块</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6"><span class="toc-number">1.0.0.0.2.1.</span> <span class="toc-text">读取文件</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%86%99%E5%85%A5%E6%96%87%E4%BB%B6"><span class="toc-number">1.0.0.0.2.2.</span> <span class="toc-text">写入文件</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86"><span class="toc-number">1.0.0.0.2.3.</span> <span class="toc-text">实例：数据处理</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#path%E8%B7%AF%E5%BE%84%E6%A8%A1%E5%9D%97"><span class="toc-number">1.0.0.0.3.</span> <span class="toc-text">path路径模块</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%8B%BC%E6%8E%A5%E6%96%87%E4%BB%B6%E8%B7%AF%E5%BE%84"><span class="toc-number">1.0.0.0.3.1.</span> <span class="toc-text">拼接文件路径</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E6%96%87%E4%BB%B6%E5%90%8D"><span class="toc-number">1.0.0.0.3.2.</span> <span class="toc-text">获取文件名</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#http%E6%A8%A1%E5%9D%97"><span class="toc-number">1.0.0.0.4.</span> <span class="toc-text">http模块</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAweb%E6%9C%8D%E5%8A%A1"><span class="toc-number">1.0.0.0.4.1.</span> <span class="toc-text">创建web服务</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#req%E8%AF%B7%E6%B1%82%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.0.0.0.4.2.</span> <span class="toc-text">req请求对象</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#res%E5%93%8D%E5%BA%94%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.0.0.0.4.3.</span> <span class="toc-text">res响应对象</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AE%E4%B8%8D%E5%90%8Curl%E5%93%8D%E5%BA%94%E4%B8%8D%E5%90%8C%E7%9A%84html%E5%86%85%E5%AE%B9"><span class="toc-number">1.0.0.0.4.4.</span> <span class="toc-text">根据不同url响应不同的html内容</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BB%BC%E5%90%88%E5%AE%9E%E6%88%981"><span class="toc-number">1.0.0.0.5.</span> <span class="toc-text">综合实战1</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E5%8C%96"><span class="toc-number">1.0.0.0.6.</span> <span class="toc-text">模块化</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">1.0.0.0.6.1.</span> <span class="toc-text">基本概念</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E5%88%86%E7%B1%BB"><span class="toc-number">1.0.0.0.6.2.</span> <span class="toc-text">模块分类</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%8A%A0%E8%BD%BD%E6%A8%A1%E5%9D%97"><span class="toc-number">1.0.0.0.6.3.</span> <span class="toc-text">加载模块</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-number">1.0.0.0.6.4.</span> <span class="toc-text">模块作用域</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#module-exports"><span class="toc-number">1.0.0.0.6.5.</span> <span class="toc-text">module.exports</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#exports%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.0.0.0.6.6.</span> <span class="toc-text">exports对象</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E5%8C%96%E8%A7%84%E8%8C%83"><span class="toc-number">1.0.0.0.6.7.</span> <span class="toc-text">模块化规范</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#npm%E4%B8%8E%E5%8C%85"><span class="toc-number">1.0.0.0.6.8.</span> <span class="toc-text">npm与包</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E7%9A%84%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6"><span class="toc-number">1.0.0.0.6.9.</span> <span class="toc-text">模块的加载机制</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Express"><span class="toc-number">1.0.0.0.7.</span> <span class="toc-text">Express</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-number">1.0.0.0.7.1.</span> <span class="toc-text">简介</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%9B%91%E5%90%ACGET%E8%AF%B7%E6%B1%82"><span class="toc-number">1.0.0.0.7.2.</span> <span class="toc-text">监听GET请求</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%9B%91%E5%90%ACPOST%E8%AF%B7%E6%B1%82"><span class="toc-number">1.0.0.0.7.3.</span> <span class="toc-text">监听POST请求</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%8A%8A%E5%86%85%E5%AE%B9%E5%93%8D%E5%BA%94%E7%BB%99%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="toc-number">1.0.0.0.7.4.</span> <span class="toc-text">把内容响应给客户端</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B"><span class="toc-number">1.0.0.0.7.5.</span> <span class="toc-text">实例</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96URL%E4%B8%AD%E6%90%BA%E5%B8%A6%E7%9A%84%E6%9F%A5%E8%AF%A2%E5%8F%82%E6%95%B0"><span class="toc-number">1.0.0.0.7.6.</span> <span class="toc-text">获取URL中携带的查询参数</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96URL%E4%B8%AD%E7%9A%84%E5%8A%A8%E6%80%81%E5%8F%82%E6%95%B0"><span class="toc-number">1.0.0.0.7.7.</span> <span class="toc-text">获取URL中的动态参数</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%89%98%E7%AE%A1%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90"><span class="toc-number">1.0.0.0.7.8.</span> <span class="toc-text">托管静态资源</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Express%E8%B7%AF%E7%94%B1"><span class="toc-number">1.0.0.0.8.</span> <span class="toc-text">Express路由</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E7%9A%84%E5%8C%B9%E9%85%8D%E8%BF%87%E7%A8%8B"><span class="toc-number">1.0.0.0.8.1.</span> <span class="toc-text">路由的匹配过程</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B-1"><span class="toc-number">1.0.0.0.8.2.</span> <span class="toc-text">实例</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#Express%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="toc-number">1.0.0.0.8.3.</span> <span class="toc-text">Express中间件</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89%E4%B8%AD%E9%97%B4%E4%BB%B6%E5%87%BD%E6%95%B0"><span class="toc-number">1.0.0.0.8.4.</span> <span class="toc-text">定义中间件函数</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Express%E5%86%99%E6%8E%A5%E5%8F%A3"><span class="toc-number">1.0.0.0.9.</span> <span class="toc-text">Express写接口</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%9F%BA%E6%9C%AC%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">1.0.0.0.9.1.</span> <span class="toc-text">创建基本的服务器</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAAPI%E8%B7%AF%E7%94%B1%E6%A8%A1%E5%9D%97"><span class="toc-number">1.0.0.0.9.2.</span> <span class="toc-text">创建API路由模块</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%BC%96%E5%86%99GET%E6%8E%A5%E5%8F%A3"><span class="toc-number">1.0.0.0.9.3.</span> <span class="toc-text">编写GET接口</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></li></ol>
      </div>
    
  </span>
</div>

    
    <div class="content index py4 ">
        
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle p-name" itemprop="name headline">
        Node.js
    </h1>



    <div class="meta">
      <span class="author p-author h-card" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span class="p-name" itemprop="name">psych</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2023-09-03T11:39:47.000Z" class="dt-published" itemprop="datePublished">2023-09-03</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fa-solid fa-archive"></i>
        <a class="category-link" href="/categories/web/">web</a> › <a class="category-link" href="/categories/web/web%E5%9F%BA%E7%A1%80/">web基础</a>
    </div>


      
    <div class="article-tag">
        <i class="fa-solid fa-tag"></i>
        <a class="p-category" href="/tags/web/" rel="tag">web</a>, <a class="p-category" href="/tags/web%E5%9F%BA%E7%A1%80/" rel="tag">web基础</a>
    </div>


    </div>
  </header>
  

  <div class="content e-content" itemprop="articleBody">
    <h1 id="Node-js"><a href="#Node-js" class="headerlink" title="Node.js"></a>Node.js</h1><h5 id="初识Node-js"><a href="#初识Node-js" class="headerlink" title="初识Node.js"></a>初识Node.js</h5><h6 id="浏览器中的JS"><a href="#浏览器中的JS" class="headerlink" title="浏览器中的JS"></a>浏览器中的JS</h6><ul>
<li>JS核心语法：变量，数据类型，分支，循环，判断，函数，作用域···</li>
<li>WebAPI：DOM操作，BOM操作，基于XMLHttpRequest的Ajax操作···</li>
</ul>
<p><strong>为什么浏览器可以运行js？</strong> —-&gt;浏览器通过使用JavaScript解析引擎来对js代码进行解析</p>
<p>不同的浏览器使用不同的JavaScript解析引擎：</p>
<ul>
<li>Chrome &#x3D;》 V8</li>
<li>Firefox &#x3D;》 OdinMonkey(奥丁猴)</li>
<li>Safri浏览器 &#x3D;》 JSCore</li>
<li>IE浏览器 &#x3D;》 Chakra （查克拉）</li>
<li>··· 在这些解析引擎中，V8解析引擎的性能是最好的！</li>
</ul>
<p><strong>为什么JS可以操作DOM和BOM？</strong> —-&gt;每个浏览器内置了DOM、BOM这样的API函数</p>
<h6 id="JS运行环境"><a href="#JS运行环境" class="headerlink" title="JS运行环境"></a>JS运行环境</h6><p>以Chrome浏览器为例：</p>
<ul>
<li>V8引擎【负责解析和执行JavaScript代码】</li>
<li>DOM、BOM等内置API模块【API是由运行环境提供的特殊接口，只能在所属的运行环境中被调用】</li>
</ul>
<p><strong>如果把JS写在前端，运行在浏览器中，此时JS可以做前端开发。而如果把JS代码写在Node.js中，JS同样可以做后端开发。</strong></p>
<h6 id="Node-js-1"><a href="#Node-js-1" class="headerlink" title="Node.js"></a>Node.js</h6><p>Node.js is a JavaScript runtime built on Chrome’s V8 JavaScript engine.[Node.js是一个基于Chrome V8引擎的JavaScript运行时]</p>
<p>Node.js运行环境：</p>
<ul>
<li>V8引擎【负责解析和执行JavaScript代码】</li>
<li>fs、path、http、JS内置对象、querystring等内置API模块【<strong>和浏览器的哪些内置模块不同</strong>】 这也是学习的重点，Node.js中也无法电泳DOM等浏览器内置API</li>
</ul>
<h5 id="fs文件系统模块"><a href="#fs文件系统模块" class="headerlink" title="fs文件系统模块"></a>fs文件系统模块</h5><p>fs是Node.js官方提供的、用来操作文件的模块，它提供了一系列的方法和属性，用来满足用户对文件的操作需求。</p>
<p>例如：</p>
<ul>
<li>fs.readFile()方法，用来读取指定文件中的内容</li>
<li>fs.writeFile()方法，用来向指定文件中写入内容</li>
</ul>
<p>如果要在JS代码中使用这个模块，需要先导入它：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conts fs = require(&#x27;fs&#x27;)</span><br></pre></td></tr></table></figure>

<h6 id="读取文件"><a href="#读取文件" class="headerlink" title="读取文件"></a>读取文件</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fs.readFile(path[,options],callback)</span><br><span class="line">参数1：path，必选，字符串，表示文件路径</span><br><span class="line">参数2：options，可选，表示以什么编码格式来读取文件</span><br><span class="line">参数3：callback，必选，文件读取完成后，通过回调函数拿到读取结果</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">//e.g:以utf8的形式，读取1.txt文件内容，并打印err和dataStr的值</span><br><span class="line">const fs = require(&#x27;fs&#x27;)</span><br><span class="line">fs.readFile(&#x27;./file/1.txt&#x27;,&#x27;utf8&#x27;,function(err,dataStr)&#123;</span><br><span class="line">    console.log(err)</span><br><span class="line">    console.log(&#x27;---&#x27;)</span><br><span class="line">    console.log(dataStr)</span><br><span class="line">&#125;)</span><br><span class="line">//改进</span><br><span class="line">const fs = require(&#x27;fs&#x27;)</span><br><span class="line">fs.readFile(&#x27;./file/1.txt&#x27;,&#x27;utf8&#x27;,function(err,dataStr)&#123;</span><br><span class="line">    if(err)&#123;</span><br><span class="line">        return console.log(&#x27;文件读取失败&#x27;+err.message)</span><br><span class="line">    &#125;</span><br><span class="line">    else&#123;</span><br><span class="line">        console.log(&#x27;文件读取成功&#x27;+dataStr)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h6 id="写入文件"><a href="#写入文件" class="headerlink" title="写入文件"></a>写入文件</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">fs.writeFile(file,data[,option],callback)</span><br><span class="line">参数1：必选，字符串，文件路径</span><br><span class="line">参数2；必选，写入内容</span><br><span class="line">参数3：可选，编码格式，默认utf8</span><br><span class="line">参数4：必选，回调函数</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//e.g</span><br><span class="line">const fs = require(&#x27;fs&#x27;)</span><br><span class="line">fs.writeFile(&#x27;./file/2.txt&#x27;,&#x27;hhh&#x27;,function(err)&#123;</span><br><span class="line">    if(err)&#123;</span><br><span class="line">        return console.log(&#x27;文件写入失败&#x27;+err)</span><br><span class="line">    &#125;</span><br><span class="line">    console.log(&#x27;文件写入成功&#x27;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h6 id="实例：数据处理"><a href="#实例：数据处理" class="headerlink" title="实例：数据处理"></a>实例：数据处理</h6><p>要求：读取文件，将格式修改的更加美观</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">const fs = require(&#x27;fs&#x27;)</span><br><span class="line">fs.readFile(&#x27;./file/test.txt&#x27;,&#x27;utf8&#x27;,function(err,dataStr)&#123;</span><br><span class="line">    if(err)&#123;</span><br><span class="line">        return console.log(&#x27;文件查看失败&#x27;+err.message)</span><br><span class="line">    &#125;</span><br><span class="line">    const arrOld = dataStr.split(&#x27; &#x27;)</span><br><span class="line">    const arrNew = []</span><br><span class="line">    arrOld.forEach(item=&gt;&#123;</span><br><span class="line">        arrNew.push(item.replace(&#x27;=&#x27;,&#x27;:&#x27;))</span><br><span class="line">    &#125;)</span><br><span class="line">    const newStr = arrNew.join(&#x27;\r\n&#x27;)</span><br><span class="line">    //console.log(newStr)</span><br><span class="line">    fs.writeFile(&#x27;./file/test_1.txt&#x27;,newStr,function(err)&#123;</span><br><span class="line">                 if(err)&#123;</span><br><span class="line">                        return console.log(&#x27;文件写入失败&#x27;+err.message)</span><br><span class="line">                    &#125;</span><br><span class="line">                console.log(&#x27;文件写入成功&#x27;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>注意：建议使用<strong>__dirname</strong>来拼接路径[ ‘ __dirname ‘ 表示执行命令的文件所在的路径]</p>
<h5 id="path路径模块"><a href="#path路径模块" class="headerlink" title="path路径模块"></a>path路径模块</h5><p>path模块是Node.js官方提供的、用来处理路径的模块。它提供了一系列的方法和属性，用来满足用户对零的处理需求。</p>
<p>例如：</p>
<ul>
<li>path.join()方法，用来将多个路径片段拼接成一个完整的路径字符串</li>
<li>path.basename()方法，用来从路径字符串中经，将文件名解析出来</li>
</ul>
<h6 id="拼接文件路径"><a href="#拼接文件路径" class="headerlink" title="拼接文件路径"></a>拼接文件路径</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const path = require(&#x27;path&#x27;)</span><br><span class="line">const pathStr = path.join(&#x27;/a&#x27;,&#x27;/b/c&#x27;,&#x27;../&#x27;,&#x27;./d&#x27;,&#x27;e&#x27;)</span><br><span class="line">console.log(pathStr)  //输出\a\b\d\e</span><br><span class="line"></span><br><span class="line">const pathStr2 = path.join(__dirname,&#x27;./file/1.txt&#x27;)    </span><br></pre></td></tr></table></figure>

<h6 id="获取文件名"><a href="#获取文件名" class="headerlink" title="获取文件名"></a>获取文件名</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const path = require(&#x27;path&#x27;)</span><br><span class="line"></span><br><span class="line">const fpath = &#x27;/a/b/c/index.html&#x27;</span><br><span class="line">    //只传一个参数</span><br><span class="line">var fullName = path.basename(fpath)</span><br><span class="line">console.log(fullName)   //index.html</span><br><span class="line">    //去掉文件后缀名</span><br><span class="line">var nameWithoutExt = path.basename(fpath,&#x27;.html&#x27;)</span><br><span class="line">console.log(nameWithoutExt)   //index</span><br></pre></td></tr></table></figure>

<p>获取文件扩展名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const path = require(&#x27;path&#x27;)</span><br><span class="line">const fpath = &#x27;/a/b/c/index.html&#x27;</span><br><span class="line">const fext = path.extname(fpath)</span><br><span class="line">console.log(fext)</span><br></pre></td></tr></table></figure>

<h5 id="http模块"><a href="#http模块" class="headerlink" title="http模块"></a>http模块</h5><p>http模块是Node.js官方提供的、用来创建web服务器的模块。通过http模块提供的http.createServer()方法，就可以很方便的对外提供web服务。</p>
<p>在Node.js中，我们不需要使用IIS、apache等第三方web服务器软件。因为我们可以基于Node.js提供的http模块，通过几行简单的代码，就能轻松的手写一个服务器软件，从而对外提供web服务</p>
<h6 id="创建web服务"><a href="#创建web服务" class="headerlink" title="创建web服务"></a>创建web服务</h6><ul>
<li>导入http模块</li>
<li>创建web服务器实例</li>
<li>为服务器绑定request事件，监听客户端的请求</li>
<li>启动服务器</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">const http = require(&#x27;http&#x27;)</span><br><span class="line"></span><br><span class="line">//使用服务器实例的on()方法，为服务器绑定一个request事件</span><br><span class="line">server.on(&#x27;request&#x27;,(req,res)=&gt;&#123;</span><br><span class="line">    //只要有客户端来请求我们的服务器，就会触发request事件，从而调用这个事件处理函数</span><br><span class="line">    console.log(&#x27;someone visit our web server&#x27;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">//调用服务器实例的listen()方法，即可启动当前的web服务器实例</span><br><span class="line">server.listen(80,() =&gt; &#123;</span><br><span class="line">    console.log(&#x27;http server running at http://127.0.0.1:80&#x27;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>实例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">1.导入http模块</span><br><span class="line">2.创建web服务器实例</span><br><span class="line">3.为服务器绑定request事件，监听客户端的请求</span><br><span class="line">4.启动服务器</span><br><span class="line">*/</span><br><span class="line">//1.导入http模块</span><br><span class="line">const http = require(&#x27;http&#x27;)</span><br><span class="line">//2.创建web服务器实例</span><br><span class="line">const server = http.createServer()</span><br><span class="line">//3.为服务器绑定request事件，监听客户端的请求</span><br><span class="line">server.on(&#x27;request&#x27;,function(req,res)&#123;</span><br><span class="line">    console.log(&#x27;someone visit our web server&#x27;)</span><br><span class="line">&#125;)</span><br><span class="line">//4.启动服务器</span><br><span class="line">server.listen(8081,function()&#123;</span><br><span class="line">    console.log(&#x27;http server running at http://127.0.0.1:8081&#x27;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h6 id="req请求对象"><a href="#req请求对象" class="headerlink" title="req请求对象"></a>req请求对象</h6><p>只要服务器接收到了客户端的请求，就会调用通过server.on()为服务器绑定的request事件处理函数。如果想在事件处理函数中，访问与客户端相关的数据或属性，可以使用如下的方法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">const http = require(&#x27;http&#x27;)</span><br><span class="line">const server = http.createServer()</span><br><span class="line">server.on(&#x27;request&#x27;,(req =&gt;&#123;</span><br><span class="line">    //req是请求对象，它包含了与客户端相关的数据和属性，例如：</span><br><span class="line">    //req.url是客户端请求的url地址</span><br><span class="line">    //req.method是客户端的method请求类型</span><br><span class="line">    const url = req.url</span><br><span class="line">    const method = req.method</span><br><span class="line">    //const str = &#x27;Your request url is&#x27;+url+&#x27;,and request method is &#x27;+method</span><br><span class="line">    const str = `Your request url is$&#123;url&#125;,and request method is $&#123;method&#125;`    //反引号!!!</span><br><span class="line">    console.log(str)</span><br><span class="line">&#125;))</span><br><span class="line">server.listen(8081,function()&#123;</span><br><span class="line">    console.log(&#x27;http server running at http://127.0.0.1:8081&#x27;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h6 id="res响应对象"><a href="#res响应对象" class="headerlink" title="res响应对象"></a>res响应对象</h6><p>在服务器的request事件处理函数中，如果想访问与服务器相关的数据或属性，可以使用如下方法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">server.on(&#x27;request&#x27;,(req,res)=&gt;&#123;</span><br><span class="line">    //res是响应对象，它包含了与服务器相关的数据和属性，例如</span><br><span class="line">    //要发送到客户端的字符串</span><br><span class="line">    const str = `Your request url is $&#123;req.url&#125;,and request method is $&#123;req.method&#125;`</span><br><span class="line">    //res.end()方法的作用：</span><br><span class="line">    //向客户端发送指定的内容，并结束此次请求的处理过程</span><br><span class="line">    res.end(str)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>解决中文乱码问题：当调用res.end()方法时，向客户端发送中文内容的时候，会出现乱码问题，此时，需要手动设置内容的编码格式。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//直接在res.end()之前加一个：</span><br><span class="line">res.setHeader(&#x27;Content-Type&#x27;,&#x27;text/html;charset=utf-8&#x27;)</span><br></pre></td></tr></table></figure>

<h6 id="根据不同url响应不同的html内容"><a href="#根据不同url响应不同的html内容" class="headerlink" title="根据不同url响应不同的html内容"></a>根据不同url响应不同的html内容</h6><ul>
<li>获取请求的url地址</li>
<li>设置默认的相应内容为404 Not found</li>
<li>判断用户请求的是否为 &#x2F; 或者 &#x2F;index.html首页</li>
<li>判断用户请求的是否为 &#x2F;about.html页面</li>
<li>设置content-type响应头，防止中文乱码</li>
<li>使用res.end()把内容响应给客户端</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">server.on(&#x27;request&#x27;,(req,res)=&gt;&#123;</span><br><span class="line">    const url = req.url                         //1.获取请求的url地址</span><br><span class="line">     let content = &#x27;&lt;h1&gt;404 Not Found&lt;/h1&gt;&#x27;      //2.设置默认的相应内容为404 Not found</span><br><span class="line">     if(url ==&#x27;/&#x27;url == &#x27;/index.html&#x27;)         //3.判断用户请求的是否为 / 或者 /index.html首页</span><br><span class="line">     &#123;</span><br><span class="line">     content = &#x27;&lt;h1&gt;首页&lt;/h1&gt;&#x27;</span><br><span class="line">     &#125;</span><br><span class="line">    else if(url == &#x27;/about.html&#x27;)&#123;               //4.判断用户请求的是否为 /about.html页面</span><br><span class="line">      content = &#x27;&lt;h1&gt;关于&lt;/h1&gt;&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">    res.setHeader(&#x27;Content-Type&#x27;,&#x27;text/html;charset=utf-8&#x27;)  //5.设置content-type响应头，防止中文乱码</span><br><span class="line">    res.end(content)                              //6.使用res.end()把内容响应给客户端</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h5 id="综合实战1"><a href="#综合实战1" class="headerlink" title="综合实战1"></a>综合实战1</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">const http = require(&#x27;http&#x27;)</span><br><span class="line">const fs = require(&#x27;fs&#x27;)</span><br><span class="line">const path = require(&#x27;path&#x27;)</span><br><span class="line"></span><br><span class="line">const server = http.createServer()</span><br><span class="line">server.on(&#x27;request&#x27;,(req,res)=&gt;&#123;</span><br><span class="line">    const url = req.url</span><br><span class="line">    //const fpath = path.join(__dirname,url)</span><br><span class="line">    let fpath = &#x27;&#x27;</span><br><span class="line">    if(url ===&#x27;/&#x27;)&#123;</span><br><span class="line">        fpath = path.join(__dirname,&#x27;./clock/index.html&#x27;)</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        fpath = path.join(__dirname,&#x27;./clock/&#x27;,url)</span><br><span class="line">    &#125;</span><br><span class="line">    res.setHeader(&#x27;Content-Type&#x27;,&#x27;text/html;charset=utf-8&#x27;)</span><br><span class="line">    fs.readFile(fpath,&#x27;utf8&#x27;,(err,dataStr)=&gt;&#123;</span><br><span class="line">        if(err)&#123;</span><br><span class="line">            return res.end(&#x27;404 Not Found&#x27;)</span><br><span class="line">        &#125;</span><br><span class="line">        res.end(dataStr)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line">server.listen(80,()=&gt;&#123;</span><br><span class="line">        console.log(&#x27;server running on http://127.0.0.1:80&#x27;)      </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h5 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h5><h6 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h6><p>模块化是指解决一个复杂问题时，自顶向下逐层把系统划分成若干个模块的过程。对于整个系统来说，模块是可组成、分解、和更换的单元。</p>
<p>在编程领域中，模块化就是遵守固定的规则，把一个大文件拆成独立并且互相依赖的多个小模块(文件)。</p>
<ul>
<li>提高代码复用性</li>
<li>提高代码可维护性</li>
<li>可以实现按需加载</li>
</ul>
<h6 id="模块分类"><a href="#模块分类" class="headerlink" title="模块分类"></a>模块分类</h6><p>Node.js中根据模块来源的不同，将模块分为了三大类，分别是：</p>
<ul>
<li>内置模块(内置模块是有Node.js官方提供的，例如fs、path、http等)</li>
<li>自定义模块(用户创建的每个.js文件，都是自定义模块)</li>
<li>第三方模块(由第三方开发出来的模块，并非官方提供的内置模块，也不是用户创建的自定义模块，需要提前下载)</li>
</ul>
<h6 id="加载模块"><a href="#加载模块" class="headerlink" title="加载模块"></a>加载模块</h6><p>使用require()方法加载模块</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//1.加载内置的fs模块</span><br><span class="line">const fs = require(&#x27;fs&#x27;)</span><br><span class="line">//2.加载用户自定义的模块</span><br><span class="line">const custom = require(&#x27;./custom.js&#x27;)     //在加载自定义文件时，可以不用加后缀名，require会自动补全js后缀名</span><br><span class="line">//3.加载第三方模块(还需要下载)</span><br><span class="line">const moment = require(&#x27;moment&#x27;)</span><br></pre></td></tr></table></figure>

<p>当使用require这个方法去加载其他模块的时候，会执行模块里的代码</p>
<h6 id="模块作用域"><a href="#模块作用域" class="headerlink" title="模块作用域"></a>模块作用域</h6><p>和函数作用域类似，在自定义模块中定义的变量、方法等成员，只能在当前模块中被访问，这种模块级别的访问限制，叫做模块作用域。</p>
<p>好处是：避免了<strong>全局变量污染</strong>问题</p>
<p>向外共享模块作用域中的成员？ -&gt; module对象</p>
<h6 id="module-exports"><a href="#module-exports" class="headerlink" title="module.exports"></a>module.exports</h6><p>在每一个.js自定义模块中都有一个module对象，它里面存储了和当前模块有关的信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//直接打印出来看看</span><br><span class="line">//console.log(module)</span><br><span class="line">Module &#123;</span><br><span class="line">  id: &#x27;.&#x27;,</span><br><span class="line">  path: &#x27;D:\\code\\jscode&#x27;,</span><br><span class="line">  exports: &#123;&#125;,                      </span><br><span class="line">  filename: &#x27;D:\\code\\jscode\\7.js&#x27;,</span><br><span class="line">  loaded: false,</span><br><span class="line">  children: [],</span><br><span class="line">  paths: [</span><br><span class="line">    &#x27;D:\\code\\jscode\\node_modules&#x27;,</span><br><span class="line">    &#x27;D:\\code\\node_modules&#x27;,</span><br><span class="line">    &#x27;D:\\node_modules&#x27;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>module.exports对象：在自定义模块中，可以使用module.exports对象，将模块内的成员共享出去，供外界使用。</p>
<p>外界使用require()方法导入自定义模块的时候，得到的就是module.exports所指向的对象。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//1.js</span><br><span class="line">//在一个自定义模块中，默认情况下，module.exports= &#123;&#125;</span><br><span class="line">//向module.exports对象上挂载username属性</span><br><span class="line">module.exports.username=&#x27;zs&#x27;</span><br><span class="line">//向module.exports对象上挂载sayHello方法</span><br><span class="line">module.exports.sayHello = function()&#123;</span><br><span class="line">    console.log(&#x27;Hello!&#x27;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//2.js</span><br><span class="line">const m = require(&#x27;./1.js&#x27;)</span><br><span class="line">console.log(m)   </span><br><span class="line">///&#123;username:&#x27;zs&#x27;,sayHello:[Function]&#125;</span><br></pre></td></tr></table></figure>

<h6 id="exports对象"><a href="#exports对象" class="headerlink" title="exports对象"></a>exports对象</h6><p>由于module.exports单词写起来比较复杂，为了简化向外共享成员的代码，Node提供了exports对象。默认情况下，exports和module.exports指向同一个对象。最终共享的结果，还是以module.exports指向的对象为准</p>
<h6 id="模块化规范"><a href="#模块化规范" class="headerlink" title="模块化规范"></a>模块化规范</h6><p>Node.js遵循了CommonJS模块化规范，CommenJS规定了模块的特性和各模块之间如何相互依赖</p>
<p>CommenJS规定：</p>
<ul>
<li>每个模块内部，module变量代表当前模块</li>
<li>module变量是一个对象，它的exports属性（modle.exports）是对外的接口</li>
<li>加载某个模块，其实就是加载改模块的module.exports属性。require()方法用于加载模块。</li>
</ul>
<h6 id="npm与包"><a href="#npm与包" class="headerlink" title="npm与包"></a>npm与包</h6><p>包就可以理解为第三方模块了。</p>
<p>安装命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install 包的完整名称[@版本号]</span><br><span class="line">npm i 包的完整名称[@版本号]</span><br></pre></td></tr></table></figure>

<p>实例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const moment = require(&#x27;moment&#x27;)</span><br><span class="line">const dt = moment().format(&#x27;YYYY-MM-DD HH:mm:ss&#x27;)</span><br><span class="line">console.log(dt)</span><br></pre></td></tr></table></figure>

<p>文件结构</p>
<p>初次装包完成之后，在项目文件夹下面会多一个叫做node_modules的文件夹和package-lock.json的配置文件</p>
<ul>
<li>node_modules文件夹用来存放所有已经安装到项目中的包。require()导入第三方包的时候，就是从这个目录中查找并加载包</li>
<li>package-lock.json配置文件用来记录node_modules目录下的每一个包的下载信息，例如包的名字、版本号、下载地址等</li>
</ul>
<p>注意：不要手动修改这两个文件的内容，npm包会自动维护。</p>
<h6 id="模块的加载机制"><a href="#模块的加载机制" class="headerlink" title="模块的加载机制"></a>模块的加载机制</h6><ul>
<li>优先从缓存中加载[所有模块]</li>
</ul>
<p>模块在第一册加载后会被缓存。这也意味着多次调用require()不会导致模块的代码被执行多次。</p>
<ul>
<li>内置模块的加载优先级最高</li>
</ul>
<p>若存在第三方模块或者自定义模块和内置模块重名了，调用时默认加载内置模块，因为它的优先级最高</p>
<ul>
<li>自定义模块加载的时候，必须是指明路径，否则不会被当做自定义模块加载。无后缀的情况下，npm会默认以先后顺序尝试加上后缀： .js .json .node</li>
</ul>
<h5 id="Express"><a href="#Express" class="headerlink" title="Express"></a>Express</h5><h6 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h6><p>Express是基于Node.js平台，快速、开放、极简的Web开发框架。通俗的理解：Express的作用和Node.js内置的http模块类似，是专门用来创建web服务器的。Express的本质：就是一个npm上的第三方包，提供了快速创建Web服务器的便捷方法。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install express --save</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// 1.导入express</span><br><span class="line">const express = repuire(&#x27;express&#x27;)</span><br><span class="line">// 2.创建web服务器</span><br><span class="line">const app = express()</span><br><span class="line">// 3.调用app.listen(端口号，启动成功后的回调函数)，启动服务器</span><br><span class="line">app.listen(80,() =&gt;&#123;</span><br><span class="line">    console.log(&#x27;express server rnning at http://127.0.0.1:80&#x27;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h6 id="监听GET请求"><a href="#监听GET请求" class="headerlink" title="监听GET请求"></a>监听GET请求</h6><p>通过app.get()方法，可以监听客户端的GET请求，具体的语法格式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//参数1：客户端请求的URL地址</span><br><span class="line">//参数2：请求对应的处理函数</span><br><span class="line">//     req：请求对象(包含了与请求相关的属性与方法)</span><br><span class="line">//     req:响应对象(包含了与响应相关的属性与方法)</span><br><span class="line">app.get(&#x27;请求的url&#x27;,function(req,res)&#123; /*处理函数*/&#125;)</span><br></pre></td></tr></table></figure>

<h6 id="监听POST请求"><a href="#监听POST请求" class="headerlink" title="监听POST请求"></a>监听POST请求</h6><p>通过app.post方法，可以监听客户端的POST请求，具体的语法格式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//参数1：客户端请求的URL地址</span><br><span class="line">//参数2：请求对应的处理函数</span><br><span class="line">//     req：请求对象(包含了与请求相关的属性与方法)</span><br><span class="line">//     req:响应对象(包含了与响应相关的属性与方法)</span><br><span class="line">app.post(&#x27;请求的url&#x27;,function(req,res)&#123; /*处理函数*/&#125;)</span><br></pre></td></tr></table></figure>

<h6 id="把内容响应给客户端"><a href="#把内容响应给客户端" class="headerlink" title="把内容响应给客户端"></a>把内容响应给客户端</h6><p>通过res.send()方法，把处理好的内容发送给客户端</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">app.get(&#x27;/user&#x27;,(req,res)=&gt;&#123;</span><br><span class="line">    res.send(&#123;name:&#x27;zs&#x27;,age:20,gender:&#x27;男&#x27;&#125;)</span><br><span class="line">&#125;)</span><br><span class="line">app.post(&#x27;/user&#x27;,(req,res)=&gt;&#123;</span><br><span class="line">    res.send(&#x27;请求成功！&#x27;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h6 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// 1.导入express</span><br><span class="line">const express = repuire(&#x27;express&#x27;)</span><br><span class="line">// 2.创建web服务器</span><br><span class="line">const app = express()</span><br><span class="line">//4.监听客户端的GET和POST请求，并向客户端响应具体的内容</span><br><span class="line">app.get(&#x27;/user&#x27;,(req,res)=&gt;&#123;</span><br><span class="line">    res.send(&#123;name:&#x27;zs&#x27;,age:20,gender:&#x27;男&#x27;&#125;)   //响应一个json数据</span><br><span class="line">&#125;)</span><br><span class="line">app.post(&#x27;/user&#x27;,(req,res)=&gt;&#123;</span><br><span class="line">    res.send(&#x27;请求成功！&#x27;)                      // 响应一段字符串</span><br><span class="line">&#125;)</span><br><span class="line">// 3.调用app.listen(端口号，启动成功后的回调函数)，启动服务器</span><br><span class="line">app.listen(80,() =&gt;&#123;</span><br><span class="line">    console.log(&#x27;express server rnning at http://127.0.0.1:80&#x27;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h6 id="获取URL中携带的查询参数"><a href="#获取URL中携带的查询参数" class="headerlink" title="获取URL中携带的查询参数"></a>获取URL中携带的查询参数</h6><p>通过req.params对象，可以访问到客户端通过查询字符串的形式，发送到服务器的参数：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//URL地址中，可以通过：参数名的形式，匹配动态参数值</span><br><span class="line">app.get(&#x27;&#x27;,(req,res)=&gt;&#123;</span><br><span class="line">    //req.query   默认是一个空对象</span><br><span class="line">    //客户端使用127.0.0.1/?age=20&amp;name=psych，这种查询字符串形式，发送到服务器的参数</span><br><span class="line">    //可以通过req.query对象访问到，例如：</span><br><span class="line">    //req.query.name  req.query.age</span><br><span class="line">    res.send(req.query)     //访问127.0.0.1/?age=20&amp;name=psych，就会返回&#123;age:20,name:&#x27;psych&#x27;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h6 id="获取URL中的动态参数"><a href="#获取URL中的动态参数" class="headerlink" title="获取URL中的动态参数"></a>获取URL中的动态参数</h6><p>通过req.params对象，可以访问到URL中，通过：匹配到的动态参数：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//URL地址中，可以通过：参数名 的形式，匹配到动态参数值</span><br><span class="line">app.get(&#x27;/user/:ids&#x27;,(req,res)=&gt;&#123;</span><br><span class="line">    //req.params  默认是一个空对象</span><br><span class="line">    //  里面存放着通过：动态匹配到的参数值</span><br><span class="line">    console.log(req.params)         //访问/user/1    匹配到的就是  &#123;&#x27;ids&#x27;:1&#125;</span><br><span class="line">    res.send(req.params)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h6 id="托管静态资源"><a href="#托管静态资源" class="headerlink" title="托管静态资源"></a>托管静态资源</h6><p>express提供了一个非常好用的函数，express.static(),通过它，我们可以非常方便地创建一个静态资源服务器，例如，通过如下代码就可以将public目录下的图片，CSS文件，JavaScript文件对外开放了。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const express = require(&#x27;express&#x27;)</span><br><span class="line">const app =express()</span><br><span class="line"></span><br><span class="line">app.uer(express.static(&#x27;./public&#x27;))      //可以多次调用，以添加多个目录</span><br><span class="line"></span><br><span class="line">app.liesten(80,()=&gt;&#123;</span><br><span class="line">    console.log(&#x27;express server running at http:127.0.0.1:80&#x27;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>现在，就可以访问public目录中的所有文件了.</p>
<p>注意：Express在制定的静态目录中查找文件，并对外提供资源的访问路径。因此，存放静态文件的目录名不会出现在URL中。如果希望它出现在路径中，可以这样修改：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.use(&#x27;/public&#x27;,express.static(&#x27;public&#x27;))</span><br></pre></td></tr></table></figure>

<h5 id="Express路由"><a href="#Express路由" class="headerlink" title="Express路由"></a>Express路由</h5><p>Express中，路由指的是客户端的请求与服务器处理函数之间的映射关系</p>
<p>Express中的路由有三部分组成，分别是请求的类型，请求的URL地址，处理函数，格式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.METHOD(PATH,HANDLER)</span><br></pre></td></tr></table></figure>

<p>例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//匹配GET请求，且请求URL为 /</span><br><span class="line">app.get(&#x27;/&#x27;,function(req,res)&#123;</span><br><span class="line">    res.send(&#x27;Hello World&#x27;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">//匹配POST请求 ，且请求URL为 /</span><br><span class="line">app.post(&#x27;/&#x27;,function(req,res)&#123;</span><br><span class="line">    res.send(&#x27;Got a post request&#x27;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h6 id="路由的匹配过程"><a href="#路由的匹配过程" class="headerlink" title="路由的匹配过程"></a>路由的匹配过程</h6><p>每当一个请求到达服务器之后，需要先经过路由的匹配，只有匹配成功之后，才会调用对应的处理函数。在匹配时，会按照路由的顺序进行匹配，如果请求类型和请求的URL同时匹配成功，则Express会将这次请求，转交给对应的function进行处理。</p>
<h6 id="实例-1"><a href="#实例-1" class="headerlink" title="实例"></a>实例</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const express = require(&#x27;express&#x27;)</span><br><span class="line">const app = express()</span><br><span class="line">app.get(&#x27;/&#x27;,(req,res)=&gt;&#123;</span><br><span class="line">    res.send(&#x27;Hello World&#x27;)</span><br><span class="line">&#125;)</span><br><span class="line">app.post(&#x27;/&#x27;,(req,res)=&gt;&#123;</span><br><span class="line">    res.send(&#x27;Post Request&#x27;)</span><br><span class="line">&#125;)</span><br><span class="line">app.listen(80,()=&gt;&#123;</span><br><span class="line">    console.log(&#x27;Express server running at http:127.0.0.1:80&#x27;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h6 id="Express中间件"><a href="#Express中间件" class="headerlink" title="Express中间件"></a>Express中间件</h6><p>Express的中间件，本质上就是一个function处理函数，Express中间件格式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var express = require(&#x27;express&#x27;);</span><br><span class="line">var app = express();</span><br><span class="line"></span><br><span class="line">app.get(&#x27;/&#x27;,function(req,res,next)&#123;</span><br><span class="line">    next()</span><br><span class="line">&#125;)</span><br><span class="line">app.listen(3000);</span><br><span class="line">注意：中间件函数形参列表中，必须包含next参数，而路由处理函数中只有req和res。</span><br></pre></td></tr></table></figure>

<p>next函数是实现多个中间件连续调用的关键，它表示把流转关系交给下一个中间件或路由</p>
<h6 id="定义中间件函数"><a href="#定义中间件函数" class="headerlink" title="定义中间件函数"></a>定义中间件函数</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const express = require(&#x27;express&#x27;)</span><br><span class="line">const app = express()</span><br><span class="line"></span><br><span class="line">const mw = function(req,res,next)&#123;</span><br><span class="line">    console.log(&#x27;这是最简单的中间件函数&#x27;)</span><br><span class="line">    next()</span><br><span class="line">&#125;</span><br><span class="line">app.listen(80)</span><br></pre></td></tr></table></figure>

<p>全局生效的中间件：只需要加一行代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aap.use(mw)</span><br></pre></td></tr></table></figure>

<p>简化格式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app.use((req,res,next)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;这是最简单的中间件函数&#x27;)</span><br><span class="line">    next()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>注意事项：</p>
<ul>
<li>一定要在路由之前注册中间件</li>
<li>客户端发送过来的请求，可以连续调用多个中间件处理</li>
<li>执行完中间件爱你的业务代码之后，不要忘记调用next()函数</li>
<li>为了防止代码逻辑混乱，调用next()函数之后不要再写额外的代码</li>
<li>连续调用多个中间件时，多个中间件之间，共享req和res对象</li>
</ul>
<h5 id="Express写接口"><a href="#Express写接口" class="headerlink" title="Express写接口"></a>Express写接口</h5><h6 id="创建基本的服务器"><a href="#创建基本的服务器" class="headerlink" title="创建基本的服务器"></a>创建基本的服务器</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const express = require(&#x27;express&#x27;)</span><br><span class="line">const app = express()</span><br><span class="line">//write your code here</span><br><span class="line">app.listen(80)</span><br></pre></td></tr></table></figure>

<h6 id="创建API路由模块"><a href="#创建API路由模块" class="headerlink" title="创建API路由模块"></a>创建API路由模块</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">const express = require(&#x27;express&#x27;)</span><br><span class="line">const app = express()</span><br><span class="line">const router = express.Router()</span><br><span class="line"></span><br><span class="line">//在这里挂载对应的路由</span><br><span class="line"></span><br><span class="line">module.exports = router</span><br><span class="line"></span><br><span class="line">// ====================================</span><br><span class="line"></span><br><span class="line">//app.js  【导入并注册路由模块】</span><br><span class="line">const apiRouter = require(&#x27;./apiRouter.js&#x27;)</span><br><span class="line">app.use(&#x27;/api&#x27;.apiRouter)</span><br></pre></td></tr></table></figure>

<h6 id="编写GET接口"><a href="#编写GET接口" class="headerlink" title="编写GET接口"></a>编写GET接口</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">apiRouter.get(&#x27;/get&#x27;,(req,res)=&gt;&#123;</span><br><span class="line">    const query = req.query</span><br><span class="line">    res.send(&#123;</span><br><span class="line">        status:0,             //status,0表示成功，1表示失败</span><br><span class="line">        msg:&#x27;GET请求成功&#x27;     //状态描述</span><br><span class="line">        data:query           //需要响应给客户端的具体数据</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>post同理，但是如果要获取URL-encoded格式的请求体数据，必须配置中间件<code>app.use(express.urlencoded(&#123;entended:false&#125;))</code></p>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
        
          <li><a href="/">Home</a></li>
        
          <li><a href="/about/">About</a></li>
        
          <li><a href="/archives/">Article</a></li>
        
          <li><a href="/tags/">Tag</a></li>
        
          <li><a href="/categories/">Category</a></li>
        
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </div>

    
    
      <div id="toc-footer" style="display: none">
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Node-js"><span class="toc-number">1.</span> <span class="toc-text">Node.js</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9D%E8%AF%86Node-js"><span class="toc-number">1.0.0.0.1.</span> <span class="toc-text">初识Node.js</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%AD%E7%9A%84JS"><span class="toc-number">1.0.0.0.1.1.</span> <span class="toc-text">浏览器中的JS</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#JS%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83"><span class="toc-number">1.0.0.0.1.2.</span> <span class="toc-text">JS运行环境</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#Node-js-1"><span class="toc-number">1.0.0.0.1.3.</span> <span class="toc-text">Node.js</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#fs%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E6%A8%A1%E5%9D%97"><span class="toc-number">1.0.0.0.2.</span> <span class="toc-text">fs文件系统模块</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6"><span class="toc-number">1.0.0.0.2.1.</span> <span class="toc-text">读取文件</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%86%99%E5%85%A5%E6%96%87%E4%BB%B6"><span class="toc-number">1.0.0.0.2.2.</span> <span class="toc-text">写入文件</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86"><span class="toc-number">1.0.0.0.2.3.</span> <span class="toc-text">实例：数据处理</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#path%E8%B7%AF%E5%BE%84%E6%A8%A1%E5%9D%97"><span class="toc-number">1.0.0.0.3.</span> <span class="toc-text">path路径模块</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%8B%BC%E6%8E%A5%E6%96%87%E4%BB%B6%E8%B7%AF%E5%BE%84"><span class="toc-number">1.0.0.0.3.1.</span> <span class="toc-text">拼接文件路径</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E6%96%87%E4%BB%B6%E5%90%8D"><span class="toc-number">1.0.0.0.3.2.</span> <span class="toc-text">获取文件名</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#http%E6%A8%A1%E5%9D%97"><span class="toc-number">1.0.0.0.4.</span> <span class="toc-text">http模块</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAweb%E6%9C%8D%E5%8A%A1"><span class="toc-number">1.0.0.0.4.1.</span> <span class="toc-text">创建web服务</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#req%E8%AF%B7%E6%B1%82%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.0.0.0.4.2.</span> <span class="toc-text">req请求对象</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#res%E5%93%8D%E5%BA%94%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.0.0.0.4.3.</span> <span class="toc-text">res响应对象</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AE%E4%B8%8D%E5%90%8Curl%E5%93%8D%E5%BA%94%E4%B8%8D%E5%90%8C%E7%9A%84html%E5%86%85%E5%AE%B9"><span class="toc-number">1.0.0.0.4.4.</span> <span class="toc-text">根据不同url响应不同的html内容</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BB%BC%E5%90%88%E5%AE%9E%E6%88%981"><span class="toc-number">1.0.0.0.5.</span> <span class="toc-text">综合实战1</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E5%8C%96"><span class="toc-number">1.0.0.0.6.</span> <span class="toc-text">模块化</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">1.0.0.0.6.1.</span> <span class="toc-text">基本概念</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E5%88%86%E7%B1%BB"><span class="toc-number">1.0.0.0.6.2.</span> <span class="toc-text">模块分类</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%8A%A0%E8%BD%BD%E6%A8%A1%E5%9D%97"><span class="toc-number">1.0.0.0.6.3.</span> <span class="toc-text">加载模块</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-number">1.0.0.0.6.4.</span> <span class="toc-text">模块作用域</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#module-exports"><span class="toc-number">1.0.0.0.6.5.</span> <span class="toc-text">module.exports</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#exports%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.0.0.0.6.6.</span> <span class="toc-text">exports对象</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E5%8C%96%E8%A7%84%E8%8C%83"><span class="toc-number">1.0.0.0.6.7.</span> <span class="toc-text">模块化规范</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#npm%E4%B8%8E%E5%8C%85"><span class="toc-number">1.0.0.0.6.8.</span> <span class="toc-text">npm与包</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E7%9A%84%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6"><span class="toc-number">1.0.0.0.6.9.</span> <span class="toc-text">模块的加载机制</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Express"><span class="toc-number">1.0.0.0.7.</span> <span class="toc-text">Express</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-number">1.0.0.0.7.1.</span> <span class="toc-text">简介</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%9B%91%E5%90%ACGET%E8%AF%B7%E6%B1%82"><span class="toc-number">1.0.0.0.7.2.</span> <span class="toc-text">监听GET请求</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%9B%91%E5%90%ACPOST%E8%AF%B7%E6%B1%82"><span class="toc-number">1.0.0.0.7.3.</span> <span class="toc-text">监听POST请求</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%8A%8A%E5%86%85%E5%AE%B9%E5%93%8D%E5%BA%94%E7%BB%99%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="toc-number">1.0.0.0.7.4.</span> <span class="toc-text">把内容响应给客户端</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B"><span class="toc-number">1.0.0.0.7.5.</span> <span class="toc-text">实例</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96URL%E4%B8%AD%E6%90%BA%E5%B8%A6%E7%9A%84%E6%9F%A5%E8%AF%A2%E5%8F%82%E6%95%B0"><span class="toc-number">1.0.0.0.7.6.</span> <span class="toc-text">获取URL中携带的查询参数</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96URL%E4%B8%AD%E7%9A%84%E5%8A%A8%E6%80%81%E5%8F%82%E6%95%B0"><span class="toc-number">1.0.0.0.7.7.</span> <span class="toc-text">获取URL中的动态参数</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%89%98%E7%AE%A1%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90"><span class="toc-number">1.0.0.0.7.8.</span> <span class="toc-text">托管静态资源</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Express%E8%B7%AF%E7%94%B1"><span class="toc-number">1.0.0.0.8.</span> <span class="toc-text">Express路由</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E7%9A%84%E5%8C%B9%E9%85%8D%E8%BF%87%E7%A8%8B"><span class="toc-number">1.0.0.0.8.1.</span> <span class="toc-text">路由的匹配过程</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B-1"><span class="toc-number">1.0.0.0.8.2.</span> <span class="toc-text">实例</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#Express%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="toc-number">1.0.0.0.8.3.</span> <span class="toc-text">Express中间件</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89%E4%B8%AD%E9%97%B4%E4%BB%B6%E5%87%BD%E6%95%B0"><span class="toc-number">1.0.0.0.8.4.</span> <span class="toc-text">定义中间件函数</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Express%E5%86%99%E6%8E%A5%E5%8F%A3"><span class="toc-number">1.0.0.0.9.</span> <span class="toc-text">Express写接口</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%9F%BA%E6%9C%AC%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">1.0.0.0.9.1.</span> <span class="toc-text">创建基本的服务器</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAAPI%E8%B7%AF%E7%94%B1%E6%A8%A1%E5%9D%97"><span class="toc-number">1.0.0.0.9.2.</span> <span class="toc-text">创建API路由模块</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%BC%96%E5%86%99GET%E6%8E%A5%E5%8F%A3"><span class="toc-number">1.0.0.0.9.3.</span> <span class="toc-text">编写GET接口</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></li></ol>
      </div>
    

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://p5ych2022.github.io/2023/09/03/node-js/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://p5ych2022.github.io/2023/09/03/node-js/&text=Node.js"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://p5ych2022.github.io/2023/09/03/node-js/&title=Node.js"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://p5ych2022.github.io/2023/09/03/node-js/&is_video=false&description=Node.js"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Node.js&body=Check out this article: http://p5ych2022.github.io/2023/09/03/node-js/"><i class="fa-solid fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://p5ych2022.github.io/2023/09/03/node-js/&title=Node.js"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://p5ych2022.github.io/2023/09/03/node-js/&title=Node.js"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://p5ych2022.github.io/2023/09/03/node-js/&title=Node.js"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://p5ych2022.github.io/2023/09/03/node-js/&title=Node.js"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://p5ych2022.github.io/2023/09/03/node-js/&name=Node.js&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://p5ych2022.github.io/2023/09/03/node-js/&t=Node.js"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa-solid fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        
          <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa-solid fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa-solid fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2022-2024
    psych
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/about/">About</a></li><!--
     --><!--
       --><li><a href="/archives/">Article</a></li><!--
     --><!--
       --><li><a href="/tags/">Tag</a></li><!--
     --><!--
       --><li><a href="/categories/">Category</a></li><!--
     --><!--
       --><li><a href="/search/">Search</a></li><!--
     -->
      </ul>
    </nav>
  </div>
</footer>
    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script>




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script>
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="fa-regular fa-clone"></i>';
    btn += '</span>';
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->

</body>
</html>
